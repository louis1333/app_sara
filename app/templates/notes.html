<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Notas ğŸ“</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#fdf2f8] min-h-screen flex flex-col">

<!-- HEADER -->
<header class="bg-white shadow p-4 text-center font-semibold">
  ğŸ“ Notas
</header>

<!-- MAIN -->
<main class="flex-1 p-4 pb-24 space-y-4">

  <!-- NUEVA NOTA -->
  <section class="bg-white rounded-xl p-4 shadow space-y-2">
    <textarea id="content"
      placeholder="Escribe una nota..."
      class="w-full border rounded-lg p-2"></textarea>

    <button onclick="addNote()"
      class="w-full bg-pink-400 text-white py-2 rounded-xl font-semibold">
      Guardar nota
    </button>
  </section>

  <!-- LISTA -->
  <section>
    <ul id="list" class="space-y-2 text-sm"></ul>
  </section>

</main>

<!-- NAVBAR -->
<nav class="fixed bottom-0 inset-x-0 bg-white border-t flex justify-around py-2 text-xs">
  <a href="/app">ğŸ  Inicio</a>
  <a href="/app/events">ğŸ“… Eventos</a>
  <a href="/app/workouts">ğŸ‹ï¸ Gym</a>
  <a href="/app/notes" class="text-pink-400">ğŸ“ Notas</a>
</nav>

<script>
/* ============================
   API
============================ */

async function addNote() {
  if (!content.value.trim()) return

  await fetch('/notes', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ content: content.value })
  })

  content.value = ''
  loadNotes()
}

async function deleteNote(id) {
  if (!confirm('Â¿Eliminar esta nota?')) return

  await fetch(`/notes/${id}`, {
    method: 'DELETE'
  })

  loadNotes()
}

async function loadNotes() {
  const r = await fetch('/notes')
  const notes = await r.json()

  list.innerHTML = ''

  notes.forEach(n => {
    const li = document.createElement('li')
    li.className = 'bg-white p-3 rounded-xl shadow flex justify-between items-start gap-2'

    li.innerHTML = `
      <p class="flex-1 whitespace-pre-wrap">ğŸ“ ${n.content}</p>
      <button onclick="deleteNote(${n.id})"
        class="text-red-500 text-xs mt-1">
        ğŸ—‘ï¸
      </button>
    `

    list.appendChild(li)
  })
}

loadNotes()
</script>

</body>
</html>

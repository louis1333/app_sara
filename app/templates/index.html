<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mi App ğŸ’™</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Config cute + minimal -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#f472b6', // pink-400
            soft: '#fdf2f8'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-soft min-h-screen flex flex-col">

  <!-- HEADER -->
  <header class="bg-white shadow p-4 text-center">
    <h1 class="text-xl font-semibold text-gray-700">
      ğŸ’• Hola, amor
    </h1>
    <p id="daily-message" class="text-sm text-gray-500 mt-1">
      Cargando mensaje...
    </p>
  </header>

  <!-- MAIN CONTENT -->
  <main class="flex-1 p-4 space-y-6">

    <!-- ESTADO DEL DÃA -->
    <section id="status-section" class="bg-white rounded-xl p-4 shadow">
      <h2 class="font-semibold text-gray-700 mb-2">ğŸ˜Š Â¿CÃ³mo te sientes hoy?</h2>

      <select id="mood" class="w-full border rounded-lg p-2 mb-2">
        <option value="">Selecciona tu estado</option>
        <option value="feliz">Feliz ğŸ˜„</option>
        <option value="normal">Normal ğŸ™‚</option>
        <option value="cansada">Cansada ğŸ˜´</option>
        <option value="estresada">Estresada ğŸ˜–</option>
      </select>

      <textarea
        id="status-note"
        placeholder="Escribe algo si quieres..."
        class="w-full border rounded-lg p-2 mb-3"
      ></textarea>

      <button
        onclick="saveStatus()"
        class="w-full bg-primary text-white py-2 rounded-xl font-semibold"
      >
        Guardar estado ğŸ’–
      </button>
    </section>

    <!-- CALENDARIO / EVENTOS -->
    <section class="bg-white rounded-xl p-4 shadow">
      <h2 class="font-semibold text-gray-700 mb-2">ğŸ“… Eventos</h2>

      <input id="event-title" placeholder="TÃ­tulo del evento"
        class="w-full border rounded-lg p-2 mb-2" />

      <input id="event-date" type="date"
        class="w-full border rounded-lg p-2 mb-2" />

      <button
        onclick="addEvent()"
        class="w-full bg-primary text-white py-2 rounded-xl font-semibold mb-3"
      >
        Agregar evento
      </button>

      <ul id="events-list" class="space-y-2 text-sm"></ul>
    </section>

    <!-- GIMNASIO -->
    <section class="bg-white rounded-xl p-4 shadow">
      <h2 class="font-semibold text-gray-700 mb-2">ğŸ‹ï¸ Rutinas</h2>

      <input id="workout-date" type="date"
        class="w-full border rounded-lg p-2 mb-2" />

      <input id="workout-routine" placeholder="Rutina"
        class="w-full border rounded-lg p-2 mb-2" />

      <button
        onclick="addWorkout()"
        class="w-full bg-primary text-white py-2 rounded-xl font-semibold"
      >
        Guardar rutina
      </button>

      <ul id="workouts-list" class="mt-3 space-y-2 text-sm"></ul>
    </section>

    <!-- NOTAS -->
    <section class="bg-white rounded-xl p-4 shadow">
      <h2 class="font-semibold text-gray-700 mb-2">ğŸ“ Notas</h2>

      <textarea id="note-content"
        placeholder="Escribe una nota..."
        class="w-full border rounded-lg p-2 mb-2"></textarea>

      <button
        onclick="addNote()"
        class="w-full bg-primary text-white py-2 rounded-xl font-semibold mb-3"
      >
        Guardar nota
      </button>

      <ul id="notes-list" class="space-y-2 text-sm"></ul>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="text-center text-xs text-gray-400 p-3">
    Hecho con ğŸ’™ solo para ti
  </footer>

  <!-- JS -->
  <script>
    async function loadMessage() {
      const res = await fetch('/message')
      const data = await res.json()
      document.getElementById('daily-message').innerText = data.message || 'ğŸ’–'
    }

    async function saveStatus() {
      const mood = document.getElementById('mood').value
      const note = document.getElementById('status-note').value

      await fetch('/status', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          date: new Date().toISOString().split('T')[0],
          mood,
          note
        })
      })

      alert('Estado guardado ğŸ’•')
    }

    async function addEvent() {
      const title = document.getElementById('event-title').value
      const date = document.getElementById('event-date').value

      await fetch('/events', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title, event_date: date })
      })

      loadEvents()
    }

    async function loadEvents() {
      const res = await fetch('/events')
      const events = await res.json()
      const list = document.getElementById('events-list')
      list.innerHTML = ''

      events.forEach(e => {
        const li = document.createElement('li')
        li.textContent = `ğŸ“Œ ${e.title} â€” ${e.date}`
        list.appendChild(li)
      })
    }

    async function addWorkout() {
      const date = document.getElementById('workout-date').value
      const routine = document.getElementById('workout-routine').value

      await fetch('/workouts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ date, routine })
      })

      loadWorkouts()
    }

    async function loadWorkouts() {
      const res = await fetch('/workouts')
      const workouts = await res.json()
      const list = document.getElementById('workouts-list')
      list.innerHTML = ''

      workouts.forEach(w => {
        const li = document.createElement('li')
        li.textContent = `ğŸ‹ï¸ ${w.date} â€” ${w.routine}`
        list.appendChild(li)
      })
    }

    async function addNote() {
      const content = document.getElementById('note-content').value

      await fetch('/notes', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content })
      })

      loadNotes()
    }

    async function loadNotes() {
      const res = await fetch('/notes')
      const notes = await res.json()
      const list = document.getElementById('notes-list')
      list.innerHTML = ''

      notes.forEach(n => {
        const li = document.createElement('li')
        li.textContent = `ğŸ“ ${n.content}`
        list.appendChild(li)
      })
    }

    loadMessage()
    loadEvents()
    loadWorkouts()
    loadNotes()
  </script>

</body>
</html>
